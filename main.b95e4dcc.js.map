{"version":3,"sources":["scripts/main.js"],"names":["tableBody","document","querySelector","allEmployees","rows","convertToNumber","number","replaceAll","convertToCurrency","string","Number","toLocaleString","isLongerThan4","value","length","isBetween18and90","hasOnlyLetters","test","headers","querySelectorAll","currSortedCol","sortList","colIndex","sort","prev","next","prevContent","children","textContent","nextContent","returnResult","localeCompare","forEach","item","append","initRowSelection","row","addEventListener","person","classList","remove","add","header","index","form","createElement","addNewEmployee","e","preventDefault","nameCell","positionCell","officeCell","ageCell","salaryCell","elements","name","position","office","age","salary","cell","addDoubleClickEvent","pushNotification","reset","innerHTML","body","posTop","posRight","title","description","type","messageNotification","heading","message","innerText","dataset","qa","style","top","right","setTimeout","el","editInput","temporaryText","target","firstChild","countries","country","removeEditInput","thisContext","focus","ev","key"],"mappings":"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","file":"main.b95e4dcc.js","sourceRoot":"..\\src","sourcesContent":["/* eslint-disable max-len */\n'use strict';\n\nconst tableBody = document.querySelector('tbody');\nconst allEmployees = tableBody.rows;\n\n// helper fn\nconst convertToNumber = number => number.replaceAll('$', '').replaceAll(',', '');\nconst convertToCurrency = string => `$${Number(string).toLocaleString('en-US')}`;\nconst isLongerThan4 = (value) => value.length >= 4;\nconst isBetween18and90 = (value) => value >= 18 && value <= 90;\nconst hasOnlyLetters = (value) => /^[^\\d]+$/.test(value);\n\n// sort list\nconst headers = document.querySelectorAll('th');\nlet currSortedCol = null;\n\nconst sortList = (colIndex) => {\n  [...allEmployees]\n    .sort((prev, next) => {\n      const prevContent = prev.children[colIndex].textContent;\n      const nextContent = next.children[colIndex].textContent;\n\n      const returnResult = (colIndex === 4)\n        ? convertToNumber(prevContent) - convertToNumber(nextContent)\n        : (prevContent).localeCompare(nextContent);\n\n      return (currSortedCol === colIndex)\n        ? returnResult * -1\n        : returnResult;\n    })\n    .forEach(item => tableBody.append(item));\n};\n\n// add click events to titles\nheaders.forEach((header, index) => {\n  header.addEventListener('click', function() {\n    sortList(index);\n    currSortedCol = (currSortedCol === index) ? null : index;\n  });\n});\n\n// add selection on row click\nfunction initRowSelection() {\n  [...tableBody.rows].forEach(row => {\n    row.addEventListener('click', function() {\n      [...tableBody.rows].forEach(person => {\n        person.classList.remove('active');\n      });\n      row.classList.add('active');\n    });\n  });\n};\n\ninitRowSelection();\n\n// add form\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\n\nform.innerHTML = `\n    <label>Name: <input name=\"name\" type=\"text\" id=\"name\" data-qa=\"name\" pattern=\"[a-zA-Z]+\" required></label>\n    <label>Position: <input name=\"position\" type=\"text\" data-qa=\"position\" pattern=\"[a-zA-Z]+\" required></label>\n    <label>Age: <input name=\"age\" type=\"number\" data-qa=\"age\" required></label>\n    <label>Office:\n      <select name = \"office\" data-qa=\"office\" required>\n        <option>Tokyo</option>\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n      </select>\n    </label>\n    <label>Salary: <input name=\"salary\" type=\"number\" data-qa=\"salary\" required></label>\n    <button type=\"submit\">Save to table</button>\n`;\n\nform.addEventListener('submit', addNewEmployee);\ndocument.body.append(form);\n\nfunction addNewEmployee(e) {\n  e.preventDefault();\n\n  const row = document.createElement('tr');\n  const nameCell = document.createElement('td');\n  const positionCell = document.createElement('td');\n  const officeCell = document.createElement('td');\n  const ageCell = document.createElement('td');\n  const salaryCell = document.createElement('td');\n\n  nameCell.textContent = form.elements.name.value;\n  positionCell.textContent = form.elements.position.value;\n  officeCell.textContent = form.elements.office.value;\n  ageCell.textContent = form.elements.age.value;\n  salaryCell.textContent = convertToCurrency(form.elements.salary.value);\n  row.append(nameCell, positionCell, officeCell, ageCell, salaryCell);\n\n  // add dblclick events to the new cells\n  row.querySelectorAll('td').forEach((cell, index) => {\n    addDoubleClickEvent(cell, index);\n  });\n\n  if (isLongerThan4(form.elements.name.value) && isBetween18and90(form.elements.age.value)) {\n    tableBody.append(row);\n    initRowSelection();\n    pushNotification(10, 10, 'Success', 'New employee added.', 'success');\n    form.reset();\n  } else {\n    pushNotification(\n      10,\n      10,\n      'Error',\n      'Please enter the correct information. The name should be at least 4 characters long. Age should not be less than 18 and greater than 90',\n      'error');\n  }\n};\n\n// notifications\n\nconst pushNotification = (posTop, posRight, title, description, type) => {\n  const messageNotification = document.createElement('div');\n  const heading = document.createElement('h2');\n  const message = document.createElement('p');\n\n  heading.innerText = title;\n  heading.classList.add('title');\n  message.innerText = description;\n\n  messageNotification.dataset.qa = 'notification';\n  messageNotification.style.top = `${posTop}px`;\n  messageNotification.style.right = `${posRight}px`;\n  messageNotification.classList.add('notification', type);\n  messageNotification.append(heading, message);\n\n  document.body.append(messageNotification);\n\n  setTimeout(() => {\n    messageNotification.remove();\n  }, 2000);\n};\n\n// add dblclick events on all cells\n[...tableBody.rows].forEach(row => {\n  row.querySelectorAll('td').forEach((cell, index) => {\n    addDoubleClickEvent(cell, index);\n  });\n});\n\n// add dblclick function\nfunction addDoubleClickEvent(el, colIndex) {\n  el.addEventListener('dblclick', (e) => {\n    let editInput = document.createElement('input');\n    const temporaryText = e.target.textContent;\n\n    editInput.value = temporaryText;\n    e.target.firstChild.remove();\n\n    switch (colIndex) {\n      case 2:\n        editInput = document.createElement('select');\n\n        const countries = ['Tokyo', 'Singapore', 'London', 'New York', 'Edinburgh', 'San Francisco'];\n\n        for (const country of countries) {\n          editInput.innerHTML += (country === temporaryText) ? `<option selected>${country}</option>` : `<option>${country}</option>`;\n        };\n        break;\n      case 3:\n        editInput.type = 'number';\n        break;\n      case 4:\n        editInput.type = 'number';\n        editInput.value = convertToNumber(temporaryText);\n        break;\n    };\n    e.target.append(editInput);\n    editInput.focus();\n\n    editInput.addEventListener('blur', function() {\n      removeEditInput(this);\n    });\n\n    editInput.addEventListener('keypress', function(ev) {\n      if (ev.key === 'Enter') {\n        removeEditInput(this);\n      }\n    });\n\n    function removeEditInput(thisContext) {\n      editInput.remove();\n\n      // handle errors\n      if (thisContext.value === '') {\n        e.target.textContent = temporaryText;\n        pushNotification(10, 10, 'Error', 'Input cannot be empty', 'error');\n\n        return;\n      }\n\n      if (colIndex === 0 && !isLongerThan4(thisContext.value)) {\n        e.target.textContent = temporaryText;\n        pushNotification(10, 10, 'Error', 'The name should be at least 4 characters long.', 'error');\n\n        return;\n      }\n\n      if ((colIndex === 0 || colIndex === 1) && !hasOnlyLetters(thisContext.value)) {\n        e.target.textContent = temporaryText;\n        pushNotification(10, 10, 'Error', 'Input should contain only letters.', 'error');\n\n        return;\n      }\n\n      if (colIndex === 3 && !isBetween18and90(thisContext.value)) {\n        e.target.textContent = temporaryText;\n        pushNotification(10, 10, 'Error', 'Age should not be less than 18 and greater than 90.', 'error');\n\n        return;\n      }\n\n      // handle success\n      if (thisContext.value !== temporaryText) {\n        pushNotification(10, 10, 'Success', 'Data updated', 'success');\n      };\n      e.target.textContent = thisContext.value;\n\n      if (colIndex === 4) {\n        e.target.textContent = convertToCurrency(thisContext.value);\n      };\n    };\n  });\n};\n"]}